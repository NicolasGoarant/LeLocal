<% content_for :title, "LeLocal - Indiquer mes besoins en locaux" %>

<% content_for :head do %>
  <style>
    .container{max-width:960px;margin:0 auto;padding:0 20px}
    .page-header{padding:70px 0;background:#1f2937;color:#fff;text-align:center;border-radius:0 0 18px 18px}
    .page-header h1{margin:0 0 6px;font-size:clamp(22px,4vw,34px);font-weight:700}
    .page-header p{opacity:.9;margin:0;font-size:clamp(14px,2.3vw,16px)}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:14px;box-shadow:0 8px 24px rgba(0,0,0,.06);padding:28px;margin:28px 0}
    .section-title{font-weight:700;margin:0 0 14px;font-size:18px;color:#111827}
    .grid{display:grid;gap:16px}
    @media(min-width:768px){.grid-2{grid-template-columns:1fr 1fr}}
    label{display:block;font-weight:600;margin:0 0 6px;color:#111827}
    .required::after{content:" *";color:#ef4444}
    .field{width:100%;padding:12px 14px;border:2px solid #e5e7eb;border-radius:10px;font-size:16px;background:#fff;transition:border .15s}
    .field:focus{outline:none;border-color:#10b981;box-shadow:0 0 0 3px rgba(16,185,129,.15)}
    .hint{margin-top:6px;color:#6b7280;font-size:13px}
    .actions{margin-top:18px}
    .btn{width:100%;display:inline-block;text-align:center;border:none;border-radius:999px;padding:14px 18px;font-weight:700;font-size:16px;cursor:pointer;background:#10b981;color:#fff}
    .btn:hover{background:#0ea371;transform:translateY(-1px)}
    .alert{margin:16px 0;padding:12px 14px;border-radius:10px}
    .alert-danger{background:#fef2f2;color:#991b1b;border:1px solid #fecaca}
    .tips{background:#f9fafb;border:1px dashed #e5e7eb;border-radius:12px;padding:16px}
    .tips ul{margin:0 0 0 18px}
  </style>
<% end %>

<div class="page-header">
  <div class="container">
    <h1>Indiquer mes besoins en locaux</h1>
    <p>Dites-nous l’essentiel : nous revenons vers vous rapidement.</p>
  </div>
</div>

<div class="container">
  <div class="card">

    <%# --- Affichage d’éventuelles erreurs remontées par le contrôleur --- %>
    <% if @need && @need.respond_to?(:errors) && @need.errors&.any? %>
      <div class="alert alert-danger">
        <strong><%= pluralize(@need.errors.count, "erreur") %></strong> à corriger&nbsp;:
        <ul>
          <% @need.errors.full_messages.each do |m| %>
            <li><%= m %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <%= form_with model: @need, url: needs_path, method: :post, local: true do |f| %>

      <p class="hint" style="margin:-6px 0 16px">
        <span class="required"></span> Champs obligatoires
      </p>

      <div class="grid grid-2">
        <div>
          <label class="required" for="need_city">Ville</label>
          <%= f.text_field :city, class: "field", required: true, placeholder: "Ex. Nancy" %>
          <div class="hint">Ville où vous cherchez le local</div>
        </div>

        <div>
          <label class="required" for="need_date_needed">Date souhaitée</label>
          <%= f.date_field :date_needed, class: "field", required: true %>
          <div class="hint">Jour principal souhaité</div>
        </div>
      </div>

      <div class="grid grid-2" style="margin-top:8px">
        <div>
          <label class="required" for="need_contact_email">Votre email</label>
          <%= f.email_field :contact_email, class: "field", required: true, placeholder: "votre@email.fr" %>
        </div>

        <div>
          <label class="required" for="need_contact_phone">Votre téléphone</label>
          <%= f.telephone_field :contact_phone, class: "field", required: true, placeholder: "06 12 34 56 78" %>
        </div>
      </div>

      <div class="grid" style="margin-top:8px">
        <div>
          <label for="need_title">Titre (optionnel)</label>
          <%= f.text_field :title, class: "field", placeholder: "Ex. Atelier créatif du samedi" %>
        </div>

        <div>
          <label for="need_description">Description (optionnel)</label>
          <%= f.text_area :description, class: "field", rows: 4, placeholder: "Ajoutez des précisions utiles (horaires, ambiance, contraintes…)" %>
        </div>
      </div>

      <div class="tips" style="margin-top:8px">
        <strong>Astuce :</strong> vous pouvez envoyer seulement la <em>ville</em>, la <em>date</em>, votre <em>email</em> et votre <em>téléphone</em>.  
        Les autres champs sont facultatifs.
      </div>

      <div class="actions">
        <%= f.submit "Envoyer ma demande", class: "btn" %>
      </div>

    <% end %>
  </div>
</div>

