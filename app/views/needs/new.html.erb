<% content_for :title, "LeLocal - Indiquer mes besoins en locaux" %>

<% content_for :head do %>
<style>
/* Style pour la page d'indication des besoins */
.main-content {
  width: 100%;
  overflow-x: hidden;
}

.page-header {
  background-image: url('https://images.unsplash.com/photo-1542744095-fcf48d80b0fd?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
  background-size: cover;
  background-position: center;
  position: relative;
  padding: 70px 0;
  color: white;
  text-align: center;
  margin-bottom: 40px;
}

.page-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
}

.page-header .container {
  position: relative;
  z-index: 2;
}

.page-header h1 {
  font-size: 2.5rem;
  margin-bottom: 15px;
  font-weight: 700;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.page-header p {
  font-size: 1.1rem;
  max-width: 800px;
  margin: 0 auto;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.form-container {
  max-width: 900px;
  margin: 0 auto 60px;
  padding: 30px;
  background-color: #fff;
  border-radius: 10px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
}

.form-intro {
  text-align: center;
  margin-bottom: 30px;
}

.form-intro h2 {
  font-size: 24px;
  color: #333;
  margin-bottom: 15px;
  position: relative;
  display: inline-block;
  padding-bottom: 10px;
}

.form-intro h2::after {
  content: '';
  position: absolute;
  left: 50%;
  bottom: 0;
  width: 60px;
  height: 3px;
  background-color: #4CAF50;
  transform: translateX(-50%);
}

.form-intro p {
  color: #666;
  max-width: 700px;
  margin: 0 auto;
  line-height: 1.5;
}

.form-section {
  margin-bottom: 30px;
  padding-bottom: 25px;
  border-bottom: 1px solid #eee;
}

.form-section-title {
  font-size: 20px;
  color: #333;
  margin-bottom: 20px;
  font-weight: 600;
  display: flex;
  align-items: center;
}

.form-section-title i {
  color: #4CAF50;
  margin-right: 12px;
  font-size: 24px;
}

.form-group {
  margin-bottom: 25px;
}

.form-group label {
  display: block;
  font-weight: 600;
  margin-bottom: 8px;
  color: #444;
}

.form-group .help-text {
  color: #888;
  font-size: 14px;
  margin-top: 5px;
  font-style: italic;
}

.input-field {
  width: 100%;
  padding: 12px 15px;
  border: 1px solid #ddd;
  border-radius: 5px;
  font-size: 16px;
  transition: all 0.3s;
}

.input-field:focus {
  border-color: #4CAF50;
  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
  outline: none;
}

.input-field.is-invalid {
  border-color: #e74c3c;
}

.error-message {
  color: #e74c3c;
  font-size: 14px;
  margin-top: 5px;
}

.textarea-field {
  min-height: 120px;
  resize: vertical;
}

.form-row {
  display: flex;
  gap: 20px;
  margin-bottom: 20px;
}

.form-col {
  flex: 1;
}

.checkbox-group {
  margin-top: 15px;
}

.checkbox-item {
  display: flex;
  align-items: center;
  margin-bottom: 12px;
}

.checkbox-item input[type="checkbox"] {
  margin-right: 10px;
  transform: scale(1.2);
}

.radio-group {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin-top: 10px;
}

.radio-item {
  display: flex;
  align-items: center;
}

.radio-item input[type="radio"] {
  margin-right: 8px;
}

.btn-submit {
  display: block;
  width: 100%;
  padding: 15px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 5px;
  font-size: 18px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  margin-top: 20px;
  text-align: center;
}

.btn-submit:hover {
  background-color: #388E3C;
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
}

.required-label::after {
  content: ' *';
  color: #e74c3c;
}

@media (max-width: 768px) {
  .form-row {
    flex-direction: column;
    gap: 10px;
  }
  
  .form-section-title {
    font-size: 18px;
  }
  
  .form-container {
    padding: 20px;
  }
}
</style>
<% end %>

<div class="main-content">
  <!-- En-tête de la page -->
  <div class="page-header">
    <div class="container">
      <h1>Indiquez vos besoins en locaux</h1>
      <p>Décrivez précisément l'espace dont votre association a besoin, et les propriétaires pourront vous contacter directement</p>
    </div>
  </div>

  <div class="container">
    <div class="form-container">
      <div class="form-intro">
        <h2>Détaillez votre recherche</h2>
        <p>Plus votre description sera précise, plus vous aurez de chances de trouver un espace qui correspond parfaitement à vos besoins. Les propriétaires pourront consulter votre annonce et vous contacter s'ils ont un local adapté.</p>
      </div>

      <%= form_with(model: @need, local: true) do |form| %>
        <% if @need.errors.any? %>
          <div class="alert alert-danger">
            <h4>Le formulaire contient <%= @need.errors.count %> erreur(s) :</h4>
            <ul>
              <% @need.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <!-- Section Informations générales -->
        <div class="form-section">
          <h3 class="form-section-title"><i class="fas fa-info-circle"></i> Informations générales</h3>
          
          <div class="form-group">
            <%= form.label :title, "Titre de votre besoin", class: "required-label" %>
            <%= form.text_field :title, class: "input-field", placeholder: "Ex: Salle pour atelier de musique hebdomadaire", required: true %>
            <p class="help-text">Un titre clair qui résume votre besoin principal</p>
          </div>
          
          <div class="form-group">
            <%= form.label :description, "Description détaillée", class: "required-label" %>
            <%= form.text_area :description, class: "input-field textarea-field", placeholder: "Décrivez votre activité, le type d'espace recherché et vos contraintes spécifiques...", required: true %>
            <p class="help-text">Donnez un maximum de détails sur votre besoin en espace et l'activité prévue</p>
          </div>
          
          <div class="form-group">
            <%= form.label :category, "Catégorie de besoin", class: "required-label" %>
            <%= form.select :category, Need::CATEGORIES, { include_blank: "Sélectionnez une catégorie" }, { class: "input-field", required: true } %>
          </div>
        </div>
        
        <!-- Section Localisation -->
        <div class="form-section">
          <h3 class="form-section-title"><i class="fas fa-map-marker-alt"></i> Localisation</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-group">
                <%= form.label :city, "Ville", class: "required-label" %>
                <%= form.text_field :city, class: "input-field", placeholder: "Ex: Paris", required: true %>
              </div>
            </div>
            
            <div class="form-col">
              <div class="form-group">
                <%= form.label :postal_code, "Code postal", class: "required-label" %>
                <%= form.text_field :postal_code, class: "input-field", placeholder: "Ex: 75011", required: true %>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <%= form.label :address, "Adresse (optionnelle)" %>
            <%= form.text_field :address, class: "input-field", placeholder: "Ex: 10 rue du Commerce" %>
            <p class="help-text">Précisez si vous recherchez un quartier spécifique</p>
          </div>
          
          <div class="form-group">
            <%= form.label :radius, "Rayon de recherche (en km)" %>
            <%= form.number_field :radius, class: "input-field", min: 1, max: 50, value: 5 %>
            <p class="help-text">Distance maximale par rapport à l'adresse ou au centre de la ville indiquée</p>
          </div>
        </div>
        
        <!-- Section Caractéristiques -->
        <div class="form-section">
          <h3 class="form-section-title"><i class="fas fa-building"></i> Caractéristiques de l'espace</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-group">
                <%= form.label :capacity, "Capacité minimale (nombre de personnes)", class: "required-label" %>
                <%= form.number_field :capacity, class: "input-field", min: 1, required: true %>
              </div>
            </div>
            
            <div class="form-col">
              <div class="form-group">
                <%= form.label :surface, "Surface minimale souhaitée (m²)" %>
                <%= form.number_field :surface, class: "input-field", min: 1 %>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <%= form.label :equipment_needed, "Équipements nécessaires" %>
            <div class="checkbox-group">
              <div class="checkbox-item">
                <%= form.check_box :wifi_needed, id: "wifi_needed" %>
                <%= form.label :wifi_needed, "Connexion WiFi", for: "wifi_needed" %>
              </div>
              <div class="checkbox-item">
                <%= form.check_box :projector_needed, id: "projector_needed" %>
                <%= form.label :projector_needed, "Vidéoprojecteur", for: "projector_needed" %>
              </div>
              <div class="checkbox-item">
                <%= form.check_box :sound_system_needed, id: "sound_system_needed" %>
                <%= form.label :sound_system_needed, "Système de sonorisation", for: "sound_system_needed" %>
              </div>
              <div class="checkbox-item">
                <%= form.check_box :kitchen_needed, id: "kitchen_needed" %>
                <%= form.label :kitchen_needed, "Cuisine/Espace traiteur", for: "kitchen_needed" %>
              </div>
              <div class="checkbox-item">
                <%= form.check_box :accessibility_needed, id: "accessibility_needed" %>
                <%= form.label :accessibility_needed, "Accessibilité PMR", for: "accessibility_needed" %>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <%= form.label :additional_equipment, "Autres équipements (précisez)" %>
            <%= form.text_area :additional_equipment, class: "input-field", rows: 3, placeholder: "Ex: tables et chaises pour 20 personnes, tableau blanc..." %>
          </div>
        </div>
        
        <!-- Section Budget et disponibilité -->
        <div class="form-section">
          <h3 class="form-section-title"><i class="fas fa-calendar-alt"></i> Budget et disponibilité</h3>
          
          <div class="form-group">
            <%= form.label :budget, "Budget maximum (€)", class: "required-label" %>
            <div class="form-row">
              <div class="form-col">
                <%= form.number_field :budget, class: "input-field", min: 1, required: true, placeholder: "Ex: 200" %>
              </div>
              <div class="form-col">
                <%= form.select :budget_period, [["par heure", "hour"], ["par jour", "day"], ["par mois", "month"]], {}, { class: "input-field" } %>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <%= form.label :frequency, "Fréquence d'utilisation" %>
            <div class="radio-group">
              <div class="radio-item">
                <%= form.radio_button :frequency, "one_time", id: "one_time" %>
                <%= form.label :frequency_one_time, "Ponctuel (une seule fois)", for: "one_time" %>
              </div>
              <div class="radio-item">
                <%= form.radio_button :frequency, "weekly", id: "weekly" %>
                <%= form.label :frequency_weekly, "Hebdomadaire", for: "weekly" %>
              </div>
              <div class="radio-item">
                <%= form.radio_button :frequency, "monthly", id: "monthly" %>
                <%= form.label :frequency_monthly, "Mensuel", for: "monthly" %>
              </div>
              <div class="radio-item">
                <%= form.radio_button :frequency, "permanent", id: "permanent" %>
                <%= form.label :frequency_permanent, "Permanent", for: "permanent" %>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <%= form.label :availability_start_date, "Date de début souhaitée", class: "required-label" %>
            <%= form.date_field :availability_start_date, class: "input-field", required: true, min: Date.today %>
          </div>
          
          <div class="form-group">
            <%= form.label :availability_end_date, "Date de fin (si applicable)" %>
            <%= form.date_field :availability_end_date, class: "input-field", min: Date.today %>
            <p class="help-text">Laissez vide si votre besoin est permanent ou à durée indéterminée</p>
          </div>
          
          <div class="form-group">
            <%= form.label :preferred_hours, "Horaires préférés" %>
            <%= form.text_field :preferred_hours, class: "input-field", placeholder: "Ex: Soirs de semaine après 18h, week-ends..." %>
          </div>
        </div>
        
        <!-- Section Coordonnées et contact -->
        <div class="form-section">
          <h3 class="form-section-title"><i class="fas fa-user"></i> Coordonnées et contact</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-group">
                <%= form.label :association_name, "Nom de l'association", class: "required-label" %>
                <%= form.text_field :association_name, class: "input-field", required: true %>
              </div>
            </div>
            
            <div class="form-col">
              <div class="form-group">
                <%= form.label :contact_name, "Nom du contact", class: "required-label" %>
                <%= form.text_field :contact_name, class: "input-field", required: true %>
              </div>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-group">
                <%= form.label :contact_email, "Email", class: "required-label" %>
                <%= form.email_field :contact_email, class: "input-field", required: true %>
              </div>
            </div>
            
            <div class="form-col">
              <div class="form-group">
                <%= form.label :contact_phone, "Téléphone", class: "required-label" %>
                <%= form.telephone_field :contact_phone, class: "input-field", required: true %>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <div class="checkbox-item">
              <%= form.check_box :public_contact, id: "public_contact" %>
              <%= form.label :public_contact, "J'accepte que mes coordonnées soient visibles par les propriétaires d'espaces", for: "public_contact" %>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <%= form.submit "Publier mon besoin", class: "btn-submit" %>
        </div>
      <% end %>
    </div>
  </div>
</div>