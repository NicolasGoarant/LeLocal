<% content_for :head do %>
  <style>
    /* Styles pour la page "Proposer un espace" */
    .host-section {
      padding: 60px 0;
      background-color: #f8f9fa;
    }
    
    .highlight {
color: var(--primary-color, #4CAF50);
 }
    .host-header {
      text-align: center;
      margin-bottom: 50px;
    }
    
    .host-header h1 {
      font-size: 2.5rem;
      margin-bottom: 15px;
      color: #333;
    }
    
    .host-header .subtitle {
      font-size: 1.2rem;
      color: #666;
      max-width: 600px;
      margin: 0 auto;
    }
    
    .host-benefits {
      display: flex;
      justify-content: space-between;
      margin-bottom: 60px;
      flex-wrap: wrap;
    }
    
    .benefit-card {
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 30px;
      width: 30%;
      text-align: center;
      transition: transform 0.3s;
    }
    
    .benefit-card:hover {
      transform: translateY(-5px);
    }
    
    .benefit-icon {
      background-color: var(--primary-color, #4CAF50);
      color: white;
      width: 70px;
      height: 70px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
      font-size: 24px;
    }
    
    .benefit-card h3 {
      margin-bottom: 10px;
      color: #333;
    }
    
    .benefit-card p {
      color: #666;
      font-size: 0.95rem;
    }
    
    .host-steps {
      margin-bottom: 60px;
    }
    
    .host-steps h2 {
      text-align: center;
      margin-bottom: 30px;
      color: #333;
    }
    
    .step-container {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    
    .step {
      display: flex;
      align-items: center;
      width: 48%;
      margin-bottom: 30px;
    }
    
    .step-number {
      background-color: var(--primary-color, #4CAF50);
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: bold;
      margin-right: 20px;
      flex-shrink: 0;
    }
    
    .step-content h3 {
      margin-bottom: 5px;
      color: #333;
    }
    
    .step-content p {
      color: #666;
      font-size: 0.95rem;
    }
    
    /* Styles pour le formulaire */
    .host-form-container {
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
      padding: 40px;
      margin-bottom: 60px;
    }
    
    .host-form-container h2 {
      text-align: center;
      margin-bottom: 10px;
      color: #333;
    }
    
    .form-intro {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
    }
    
    .form-section {
      margin-bottom: 35px;
      border-bottom: 1px solid #eee;
      padding-bottom: 30px;
    }
    
    .form-section:last-of-type {
      border-bottom: none;
    }
    
    .form-section h3 {
      margin-bottom: 20px;
      color: #333;
      font-size: 1.2rem;
    }
    
    .section-hint {
      color: #777;
      font-size: 0.9rem;
      margin-bottom: 15px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-row {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .form-group.half {
      width: 48%;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #555;
      font-weight: 500;
    }
    
    .form-group input[type="text"],
    .form-group input[type="number"],
    .form-group input[type="email"],
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1rem;
      transition: border-color 0.3s;
    }
    
    .form-group input[type="text"]:focus,
    .form-group input[type="number"]:focus,
    .form-group input[type="email"]:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      border-color: var(--primary-color, #4CAF50);
      outline: none;
    }
    
    .price-input {
      position: relative;
    }
    
    .price-currency {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #777;
    }
    
    /* Styles pour l'upload d'images */
    .image-upload-container {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 15px;
    }
    
    .image-upload-button {
      display: flex;
      align-items: center;
      gap: 10px;
      background-color: #f5f5f5;
      border: 1px dashed #ccc;
      border-radius: 5px;
      padding: 12px 20px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    .image-upload-button:hover {
      background-color: #eaeaea;
    }
    
    .image-upload-button i {
      font-size: 1.2rem;
      color: #666;
    }
    
    .hidden-file-input {
      display: none;
    }
    
    .image-upload-hint p {
      color: #777;
      font-size: 0.85rem;
    }
    
    .image-previews {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-top: 20px;
    }
    
    .image-preview {
      position: relative;
      width: 120px;
      height: 120px;
      border-radius: 5px;
      overflow: hidden;
    }
    
    .image-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .remove-image {
      position: absolute;
      top: 5px;
      right: 5px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background-color: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      font-size: 16px;
      line-height: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    /* Styles pour les disponibilités */
    .availability-container {
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    
    .availability-header {
      display: grid;
      grid-template-columns: 1fr 1fr 2fr;
      padding: 12px 15px;
      background-color: #f5f5f5;
      border-bottom: 1px solid #ddd;
      font-weight: 500;
    }
    
    .availability-row {
      display: grid;
      grid-template-columns: 1fr 1fr 2fr;
      padding: 12px 15px;
      border-bottom: 1px solid #eee;
      align-items: center;
    }
    
    .availability-row:last-child {
      border-bottom: none;
    }
    
    .day-name {
      font-weight: 500;
    }
    
    .availability-toggle {
      text-align: center;
    }
    
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
      background-color: #ccc;
      border-radius: 12px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    .toggle-switch:after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background-color: white;
      border-radius: 50%;
      transition: left 0.3s;
    }
    
    .availability-checkbox {
      display: none;
    }
    
    .availability-checkbox:checked + .toggle-switch {
      background-color: var(--primary-color, #4CAF50);
    }
    
    .availability-checkbox:checked + .toggle-switch:after {
      left: 28px;
    }
    
    .time-range {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .time-select {
      flex: 1;
      padding: 8px 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    
    .time-separator {
      font-weight: 500;
    }
    
    /* Styles pour les équipements */
    .amenities-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 30px;
    }
    
    .amenity-group h4 {
      margin-bottom: 15px;
      color: #555;
    }
    
    .amenity-checkboxes {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    
    .amenity-checkbox {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .amenity-checkbox input[type="checkbox"] {
      width: 18px;
      height: 18px;
      accent-color: var(--primary-color, #4CAF50);
    }
    
    /* Styles pour les termes et conditions */
    .terms-agreement {
      margin-bottom: 30px;
    }
    
    .form-checkbox {
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }
    
    .form-checkbox input[type="checkbox"] {
      margin-top: 3px;
    }
    
    .form-checkbox label {
      font-size: 0.95rem;
      color: #555;
    }
    
    .form-checkbox a {
      color: var(--primary-color, #4CAF50);
      text-decoration: underline;
    }
    
    /* Styles pour les boutons du formulaire */
    .form-actions {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 40px;
    }
    
    .btn-large {
      padding: 15px 30px;
      border-radius: 30px;
      font-size: 1.1rem;
      font-weight: bold;
      text-decoration: none;
      transition: all 0.3s;
      border: none;
      cursor: pointer;
      display: inline-block;
    }
    
    .btn-large.primary {
      background-color: var(--primary-color, #4CAF50);
      color: white;
    }
    
    .btn-large.secondary {
      background-color: #eee;
      color: #555;
    }
    
    .btn-large.primary:hover {
      background-color: #3d8b3d;
    }
    
    .btn-large.secondary:hover {
      background-color: #ddd;
    }
    
    /* Styles pour les FAQ */
    .host-faq {
      margin-top: 60px;
    }
    
    .host-faq h2 {
      text-align: center;
      margin-bottom: 30px;
      color: #333;
    }
    
    .faq-container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .faq-item {
      border-bottom: 1px solid #e0e0e0;
      margin-bottom: 15px;
    }
    
    .faq-question {
      padding: 15px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
    }
    
    .faq-question h3 {
      margin: 0;
      font-size: 1.1rem;
      color: #333;
    }
    
    .faq-toggle {
      font-size: 1.5rem;
      color: var(--primary-color, #4CAF50);
    }
    
    .faq-answer {
      padding: 0 0 15px;
      color: #666;
    }
    
    /* Style pour le modal de connexion */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      align-items: center;
      justify-content: center;
      z-index: 1100;
      overflow: auto;
    }

    .modal-content {
      background-color: white;
      border-radius: 10px;
      padding: 30px;
      width: 100%;
      max-width: 450px;
      position: relative;
      animation: modalAppear 0.3s ease-out;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    }

    @keyframes modalAppear {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .close-modal {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 28px;
      color: #aaa;
      cursor: pointer;
      transition: color 0.2s;
    }

    .close-modal:hover {
      color: #555;
    }

    .modal h2 {
      margin-bottom: 20px;
      color: #333;
      text-align: center;
      font-size: 1.5rem;
    }

    .modal .form-group {
      margin-bottom: 20px;
    }

    .password-helper {
      display: flex;
      justify-content: flex-end;
      margin-top: 5px;
    }

    .forgot-password {
      color: #777;
      font-size: 0.9rem;
      text-decoration: none;
      transition: color 0.2s;
    }

    .forgot-password:hover {
      color: var(--primary-color, #4CAF50);
      text-decoration: underline;
    }

    .remember-me {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .remember-me input[type="checkbox"] {
      width: auto;
    }

    .remember-me label {
      margin-bottom: 0;
      color: #666;
      font-weight: normal;
    }

    .modal-footer {
      margin-top: 20px;
      text-align: center;
      color: #666;
      font-size: 0.95rem;
    }

    .signup-link {
      color: var(--primary-color, #4CAF50);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s;
    }

    .signup-link:hover {
      text-decoration: underline;
    }

    .form-error {
      background-color: #fff5f5;
      border: 1px solid #ffc8c8;
      border-radius: 5px;
      padding: 10px 15px;
      margin-bottom: 15px;
      color: #d32f2f;
      font-size: 0.9rem;
    }
  </style>
<% end %>

<section class="host-section">
<div class="container">
  <div class="host-header">
    <h1>Proposer votre espace sur LeLocal</h1>
    <p class="subtitle">Partagez votre espace avec la communauté et générez des revenus supplémentaires</p>
  </div>
  
  <div class="host-content">
    <div class="host-benefits">
      <div class="benefit-card">
        <div class="benefit-icon">
          <i class="fas fa-euro-sign"></i>
        </div>
        <h3>Générez des revenus</h3>
        <p>Rentabilisez votre espace en le louant lorsque vous ne l'utilisez pas</p>
      </div>
      
      <div class="benefit-card">
        <div class="benefit-icon">
          <i class="fas fa-calendar-alt"></i>
        </div>
        <h3>Flexibilité totale</h3>
        <p>Définissez vos propres disponibilités et tarifs selon vos besoins</p>
      </div>
      
      <div class="benefit-card">
        <div class="benefit-icon">
          <i class="fas fa-shield-alt"></i>
        </div>
        <h3>Sécurité garantie</h3>
        <p>Nos utilisateurs sont vérifiés et notre assurance couvre les dommages éventuels</p>
      </div>
    </div>
    
       
    <div class="host-form-container">
      <h2>Créer votre annonce</h2>
      <p class="form-intro">Remplissez le formulaire ci-dessous pour proposer votre espace</p>
      
      <%= form_with(model: @space, url: spaces_path, class: "host-form", local: true) do |f| %>
        <% if @space.errors.any? %>
          <div class="form-errors">
            <h3><%= pluralize(@space.errors.count, "erreur") %> empêche(nt) la sauvegarde de votre espace :</h3>
            <ul>
              <% @space.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>
        
        <div class="form-section">
          <h3>Informations générales</h3>
          <p class="section-hint">Donnez des informations claires et précises sur votre espace</p>
          
          <div class="form-group">
            <%= f.label :name, "Nom de l'espace" %>
            <%= f.text_field :name, required: true, placeholder: "Ex: Salle de réunion Centre-Ville" %>
          </div>
          
          <div class="form-row">
            <div class="form-group half">
              <%= f.label :category, "Catégorie" %>
              <%= f.select :category, [
                ["Salle de réunion", "salle_reunion"],
                ["Bureau partagé", "bureau_partage"],
                ["Salle de formation", "salle_formation"],
                ["Espace événementiel", "espace_evenementiel"],
                ["Atelier", "atelier"],
                ["Autre", "autre"]
              ], { include_blank: "Sélectionnez une catégorie" }, { required: true } %>
            </div>
            
            <div class="form-group half">
              <%= f.label :capacity, "Capacité d'accueil" %>
              <%= f.number_field :capacity, required: true, min: 1, max: 500, placeholder: "Nombre de personnes" %>
            </div>
          </div>
          
          <div class="form-group">
            <%= f.label :description, "Description" %>
            <%= f.text_area :description, rows: 5, required: true, placeholder: "Décrivez votre espace en détail (équipements, ambiance, points forts...)" %>
          </div>
        </div>
        
        <div class="form-section">
          <h3>Localisation</h3>
          <p class="section-hint">L'adresse exacte ne sera visible qu'après confirmation de la réservation</p>
          
          <div class="form-row">
            <div class="form-group half">
              <%= f.label :address, "Adresse" %>
              <%= f.text_field :address, required: true, placeholder: "Numéro et nom de rue" %>
            </div>
            
            <div class="form-group half">
              <%= f.label :postal_code, "Code postal" %>
              <%= f.text_field :postal_code, required: true, placeholder: "Code postal" %>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group half">
              <%= f.label :city, "Ville" %>
              <%= f.text_field :city, required: true, placeholder: "Ville" %>
            </div>
            
            <div class="form-group half">
              <%= f.label :country, "Pays" %>
              <%= f.text_field :country, required: true, value: "France" %>
            </div>
          </div>
        </div>
        
        <div class="form-section">
          <h3>Photos</h3>
          <p class="section-hint">Ajoutez des photos de qualité pour mettre en valeur votre espace (max 8 photos)</p>
          
          <div class="image-upload-container">
            <label for="space_photos" class="image-upload-button">
              <i class="fas fa-cloud-upload-alt"></i>
              <span>Ajouter des photos</span>
            </label>
            <%= f.file_field :photos, multiple: true, accept: "image/*", class: "hidden-file-input", id: "space_photos" %>
            
            <div class="image-upload-hint">
              <p>Formats acceptés: JPG, PNG, GIF. Taille max: 5 Mo par image</p>
            </div>
          </div>
          
          <div class="image-previews" id="image-previews">
            <!-- Les aperçus des images seront ajoutés ici via JavaScript -->
          </div>
        </div>
        
        <div class="form-section">
          <h3>Tarification</h3>
          <p class="section-hint">Définissez le prix horaire de votre espace (TTC)</p>
          
          <div class="form-row">
            <div class="form-group half">
              <%= f.label :hourly_price, "Prix par heure" %>
              <div class="price-input">
                <%= f.number_field :hourly_price, required: true, min: 5, max: 1000, step: 0.5, placeholder: "25" %>
                <span class="price-currency">€</span>
              </div>
            </div>
            
            <div class="form-group half">
              <%= f.label :minimum_hours, "Durée minimale de réservation" %>
              <%= f.select :minimum_hours, [
                ["1 heure", 1],
                ["2 heures", 2],
                ["3 heures", 3],
                ["4 heures", 4],
                ["6 heures", 6],
                ["8 heures", 8]
              ], {}, { required: true } %>
            </div>
          </div>
        </div>
        
        <div class="form-section">
          <h3>Disponibilités</h3>
          <p class="section-hint">Indiquez les jours et horaires où votre espace est disponible</p>
          
          <div class="availability-container">
            <div class="availability-header">
              <div>Jour</div>
              <div class="availability-status-header">Disponible</div>
              <div class="time-header">Horaires</div>
            </div>
            
            <% %w[Lundi Mardi Mercredi Jeudi Vendredi Samedi Dimanche].each_with_index do |day, index| %>
              <% day_key = day.downcase %>
              <div class="availability-row">
                <div class="day-name"><%= day %></div>
                <div class="availability-toggle">
                  <input type="checkbox" id="<%= day_key %>_available" name="availability[<%= day_key %>][available]" class="availability-checkbox">
                  <label for="<%= day_key %>_available" class="toggle-switch"></label>
                </div>
                <div class="time-range">
                  <select name="availability[<%= day_key %>][start_time]" class="time-select start-time" disabled>
                    <% (8..14).each do |hour| %>
                      <option value="<%= sprintf('%02d:00', hour) %>"><%= sprintf('%02d:00', hour) %></option>
                    <% end %>
                  </select>
                  <span class="time-separator">à</span>
                  <select name="availability[<%= day_key %>][end_time]" class="time-select end-time" disabled>
                    <% (12..20).each do |hour| %>
                      <option value="<%= sprintf('%02d:00', hour) %>"><%= sprintf('%02d:00', hour) %></option>
                    <% end %>
                  </select>
                </div>
              </div>
            <% end %>
          </div>
        </div>
        
        <div class="form-section">
          <h3>Équipements et services</h3>
          <p class="section-hint">Indiquez les équipements et services disponibles dans votre espace</p>
          
          <div class="amenities-container">
            <div class="amenity-group">
              <h4>Équipements de base</h4>
              <div class="amenity-checkboxes">
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_wifi" name="amenities[]" value="wifi">
                  <label for="amenity_wifi">WiFi</label>
                </div>
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_projector" name="amenities[]" value="projector">
                  <label for="amenity_projector">Vidéoprojecteur</label>
                </div>
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_whiteboard" name="amenities[]" value="whiteboard">
                  <label for="amenity_whiteboard">Tableau blanc</label>
                </div>
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_hdmi" name="amenities[]" value="hdmi">
                  <label for="amenity_hdmi">Câble HDMI</label>
                </div>
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_screen" name="amenities[]" value="screen">
                  <label for="amenity_screen">Écran</label>
                </div>
              </div>
            </div>
            
            <div class="amenity-group">
              <h4>Mobilier</h4>
              <div class="amenity-checkboxes">
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_tables" name="amenities[]" value="tables">
                  <label for="amenity_tables">Tables</label>
                </div>
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_chairs" name="amenities[]" value="chairs">
                  <label for="amenity_chairs">Chaises</label>
                </div>
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_sofa" name="amenities[]" value="sofa">
                  <label for="amenity_sofa">Canapé/Fauteuils</label>
                </div>
              </div>
            </div>
            
            <div class="amenity-group">
              <h4>Confort</h4>
              <div class="amenity-checkboxes">
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_heating" name="amenities[]" value="heating">
                  <label for="amenity_heating">Chauffage</label>
                </div>
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_ac" name="amenities[]" value="ac">
                  <label for="amenity_ac">Climatisation</label>
                </div>
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_natural_light" name="amenities[]" value="natural_light">
                  <label for="amenity_natural_light">Lumière naturelle</label>
                </div>
              </div>
            </div>
            
            <div class="amenity-group">
              <h4>Restauration</h4>
              <div class="amenity-checkboxes">
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_kitchenette" name="amenities[]" value="kitchenette">
                  <label for="amenity_kitchenette">Coin cuisine</label>
                </div>
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_coffee" name="amenities[]" value="coffee">
                  <label for="amenity_coffee">Machine à café</label>
                </div>
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_fridge" name="amenities[]" value="fridge">
                  <label for="amenity_fridge">Réfrigérateur</label>
                </div>
                <div class="amenity-checkbox">
                  <input type="checkbox" id="amenity_microwave" name="amenities[]" value="microwave">
                  <label for="amenity_microwave">Micro-ondes</label>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="form-section">
          <h3>Règles et conditions</h3>
          <p class="section-hint">Précisez les règles d'utilisation de votre espace</p>
          
          <div class="form-group">
            <%= f.label :rules, "Règles de l'espace" %>
            <%= f.text_area :rules, rows: 4, placeholder: "Ex: Pas de nourriture, Pas d'animaux, etc." %>
          </div>
          
          <div class="form-group">
            <%= f.label :cancellation_policy, "Politique d'annulation" %>
            <%= f.select :cancellation_policy, [
              ["Flexible - Remboursement complet 24h avant", "flexible"],
              ["Modérée - Remboursement 50% 48h avant", "moderate"],
              ["Stricte - Pas de remboursement 72h avant", "strict"]
            ], {}, { required: true } %>
          </div>
        </div>
        
        <div class="terms-agreement">
          <div class="form-checkbox">
            <input type="checkbox" id="terms_agreement" name="terms_agreement" required>
            <label for="terms_agreement">
              En proposant mon espace, j'accepte les <%= link_to "conditions générales d'utilisation", terms_path %> et la <%= link_to "politique de confidentialité", privacy_path %> de LeLocal.
            </label>
          </div>
        </div>
        
        <div class="form-actions">
          <%= f.submit "Créer mon annonce", class: "btn-large primary" %>
          <button type="reset" class="btn-large secondary">Réinitialiser</button>
        </div>
      <% end %>
    </div>
    
    <div class="host-faq">
      <h2>Questions fréquentes</h2>
      
      <div class="faq-container">
        <div class="faq-item">
          <div class="faq-question">
            <h3>Comment fixer mon prix ?</h3>
            <span class="faq-toggle">+</span>
          </div>
          <div class="faq-answer">
            <p>Nous vous recommandons de consulter les prix des espaces similaires dans votre quartier. Pensez aussi à vos coûts (électricité, nettoyage) et à la rareté de votre type d'espace. Vous pouvez toujours ajuster vos tarifs par la suite.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">
            <h3>Comment se passe le paiement ?</h3>
            <span class="faq-toggle">+</span>
          </div>
          <div class="faq-answer">
            <p>Nous encaissons le paiement au moment de la réservation, mais nous ne vous le versons que 24h après la fin de celle-ci, afin de nous assurer que tout s'est bien passé. L'argent est ensuite transféré sur votre compte bancaire.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">
            <h3>Qui peut réserver mon espace ?</h3>
            <span class="faq-toggle">+</span>
          </div>
          <div class="faq-answer">
            <p>Tous les utilisateurs inscrits sur LeLocal peuvent réserver votre espace. Vous pouvez voir leur profil et leurs avis avant d'accepter une réservation. Vous avez la possibilité de refuser une réservation si nécessaire.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">
            <h3>Que se passe-t-il en cas d'annulation ?</h3>
            <span class="faq-toggle">+</span>
          </div>
          <div class="faq-answer">
            <p>Vous pouvez définir vos propres conditions d'annulation (flexibles, modérées ou strictes). En fonction de ces conditions, les utilisateurs peuvent recevoir un remboursement total ou partiel en cas d'annulation.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">
            <h3>Dois-je payer des impôts sur mes revenus de location ?</h3>
            <span class="faq-toggle">+</span>
          </div>
          <div class="faq-answer">
            <p>Les revenus générés par la location de votre espace sont imposables. Nous vous recommandons de consulter un conseiller fiscal pour connaître vos obligations spécifiques.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Modal de connexion -->
<div id="login-modal" class="modal">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <h2>Connexion à LeLocal</h2>
    <%= form_with url: user_session_path, method: :post, id: "login-form", local: true do |f| %>
      <div class="form-group">
        <%= f.label :email, "Email" %>
        <%= f.email_field :email, required: true, autocomplete: "email" %>
      </div>
      <div class="form-group">
        <%= f.label :password, "Mot de passe" %>
        <%= f.password_field :password, required: true, autocomplete: "current-password" %>
        <div class="password-helper">
          <%= link_to "Mot de passe oublié ?", new_user_password_path, class: "forgot-password" %>
        </div>
      </div>
      <div class="form-group remember-me">
        <%= f.check_box :remember_me, id: "remember_me" %>
        <%= f.label :remember_me, "Se souvenir de moi" %>
      </div>
      <div class="form-actions">
        <%= f.submit "Se connecter", class: "btn-large primary" %>
      </div>
    <% end %>
    <div class="modal-footer">
      <p>Vous n'avez pas de compte ? <%= link_to "Créer un compte", new_user_registration_path, class: "signup-link" %></p>
    </div>
  </div>
</div>

<% content_for :scripts do %>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialisation du modal de connexion
    const loginButton = document.querySelector('.login-btn');
    const loginModal = document.getElementById('login-modal');
    
    if (loginButton && loginModal) {
      const closeModal = loginModal.querySelector('.close-modal');
      const loginForm = document.getElementById('login-form');

      // Ouvrir le modal quand on clique sur le bouton de connexion
      loginButton.addEventListener('click', function(e) {
        e.preventDefault();
        loginModal.style.display = 'flex';
        document.body.style.overflow = 'hidden'; // Empêcher le défilement de la page
      });

      // Fermer le modal quand on clique sur le X
      closeModal.addEventListener('click', function() {
        loginModal.style.display = 'none';
        document.body.style.overflow = 'auto'; // Réactiver le défilement de la page
      });

      // Fermer le modal quand on clique en dehors
      window.addEventListener('click', function(e) {
        if (e.target === loginModal) {
          loginModal.style.display = 'none';
          document.body.style.overflow = 'auto';
        }
      });

      // Gestion des erreurs du formulaire
      loginForm.addEventListener('submit', function(e) {
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;
        
        if (!email || !password) {
          e.preventDefault();
          
          // Afficher un message d'erreur
          let errorElement = document.querySelector('.form-error');
          if (!errorElement) {
            errorElement = document.createElement('div');
            errorElement.className = 'form-error';
            loginForm.insertBefore(errorElement, loginForm.firstChild);
          }
          
          errorElement.textContent = "Veuillez remplir tous les champs";
        }
      });
    }
  
    // Gestion des FAQs
    const faqItems = document.querySelectorAll('.faq-item');
    
    faqItems.forEach(item => {
      const question = item.querySelector('.faq-question');
      const toggle = item.querySelector('.faq-toggle');
      const answer = item.querySelector('.faq-answer');
      
      question.addEventListener('click', () => {
        // Fermer toutes les autres réponses
        faqItems.forEach(otherItem => {
          if (otherItem !== item) {
            otherItem.classList.remove('active');
            otherItem.querySelector('.faq-answer').style.display = 'none';
            otherItem.querySelector('.faq-toggle').textContent = '+';
          }
        });
        
        // Toggle la réponse actuelle
        item.classList.toggle('active');
        if (item.classList.contains('active')) {
          answer.style.display = 'block';
          toggle.textContent = '−';
        } else {
          answer.style.display = 'none';
          toggle.textContent = '+';
        }
      });
      
      // Cacher toutes les réponses par défaut
      answer.style.display = 'none';
    });
    
    // Gestion des aperçus d'images
    const imageInput = document.querySelector('.hidden-file-input');
    const previewContainer = document.getElementById('image-previews');
    
    if (imageInput) {
      imageInput.addEventListener('change', function() {
        previewContainer.innerHTML = ''; // Vider les aperçus existants
        
        if (this.files) {
          Array.from(this.files).forEach(file => {
            if (!file.type.match('image.*')) {
              return;
            }
            
            const reader = new FileReader();
            
            reader.onload = function(e) {
              const previewDiv = document.createElement('div');
              previewDiv.className = 'image-preview';
              
              const img = document.createElement('img');
              img.src = e.target.result;
              
              const removeBtn = document.createElement('button');
              removeBtn.className = 'remove-image';
              removeBtn.innerHTML = '×';
              removeBtn.addEventListener('click', function(event) {
                event.preventDefault();
                previewDiv.remove();
                // Note: Dans une vraie application, il faudrait aussi gérer la suppression du fichier dans l'input file
              });
              
              previewDiv.appendChild(img);
              previewDiv.appendChild(removeBtn);
              previewContainer.appendChild(previewDiv);
            };
            
            reader.readAsDataURL(file);
          });
        }
      });
    }
    
    // Gestion des disponibilités
    const availabilityCheckboxes = document.querySelectorAll('.availability-checkbox');
    
    availabilityCheckboxes.forEach(checkbox => {
      checkbox.addEventListener('change', function() {
        const row = this.closest('.availability-row');
        const startTimeSelect = row.querySelector('.start-time');
        const endTimeSelect = row.querySelector('.end-time');
        
        if (this.checked) {
          startTimeSelect.disabled = false;
          endTimeSelect.disabled = false;
        } else {
          startTimeSelect.disabled = true;
          endTimeSelect.disabled = true;
        }
      });
    });
  });
</script>
<% end %>